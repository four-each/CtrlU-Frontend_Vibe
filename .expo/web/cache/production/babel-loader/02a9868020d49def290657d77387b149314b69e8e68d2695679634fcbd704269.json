{"ast":null,"code":"import{useRef}from'react';import{useSharedValue}from\"./useSharedValue\";import{getTag}from\"../NativeMethods\";import{getShadowNodeWrapperFromHostInstance}from\"../fabricUtils\";import{makeShareableCloneRecursive,registerShareableMapping}from\"../shareables\";function getShareableShadowNodeFromComponent(component){return getShadowNodeWrapperFromHostInstance(component);}function getComponentOrScrollableRef(component){if(global._IS_FABRIC&&component.getNativeScrollRef){return component.getNativeScrollRef();}else if(!global._IS_FABRIC&&component.getScrollableNode){return component.getScrollableNode();}return component;}var getTagValueFunction=global._IS_FABRIC?getShareableShadowNodeFromComponent:getTag;var _worklet_14499715267282_init_data={code:\"function anonymous(){const{tag}=this._closure;return function(){return tag.value;};}\",location:\"/Users/positive-yeon/Downloads/cursor-talk-to-figma-mcp-main/node_modules/react-native-reanimated/lib/module/reanimated2/hook/useAnimatedRef.js\"};export function useAnimatedRef(){var tag=useSharedValue(-1);var ref=useRef();if(!ref.current){var _fun=function fun(component){if(component){tag.value=getTagValueFunction(getComponentOrScrollableRef(component));_fun.current=component;}return tag.value;};_fun.current=null;var remoteRef=makeShareableCloneRecursive({__init:function(){var _f=function _f(){return function(){return tag.value;};};_f._closure={tag:tag};_f.__initData=_worklet_14499715267282_init_data;_f.__workletHash=14499715267282;return _f;}()});registerShareableMapping(_fun,remoteRef);ref.current=_fun;}return ref.current;}","map":{"version":3,"names":["useRef","useSharedValue","getTag","getShadowNodeWrapperFromHostInstance","makeShareableCloneRecursive","registerShareableMapping","getShareableShadowNodeFromComponent","component","getComponentOrScrollableRef","global","_IS_FABRIC","getNativeScrollRef","getScrollableNode","getTagValueFunction","_worklet_14499715267282_init_data","code","location","useAnimatedRef","tag","ref","current","fun","value","remoteRef","__init","_f","_closure","__initData","__workletHash"],"sources":["/Users/positive-yeon/Downloads/cursor-talk-to-figma-mcp-main/node_modules/react-native-reanimated/lib/module/reanimated2/hook/useAnimatedRef.ts"],"sourcesContent":["import { Component, useRef } from 'react';\nimport { useSharedValue } from './useSharedValue';\nimport { RefObjectFunction } from './commonTypes';\nimport { ShadowNodeWrapper } from '../commonTypes';\nimport { getTag } from '../NativeMethods';\nimport { getShadowNodeWrapperFromHostInstance } from '../fabricUtils';\nimport {\n  makeShareableCloneRecursive,\n  registerShareableMapping,\n} from '../shareables';\n\ninterface ComponentRef extends Component {\n  getNativeScrollRef?: () => ComponentRef;\n  getScrollableNode?: () => ComponentRef;\n}\n\nfunction getShareableShadowNodeFromComponent(\n  component: ComponentRef\n): ShadowNodeWrapper {\n  return getShadowNodeWrapperFromHostInstance(component);\n}\n\nfunction getComponentOrScrollableRef(component: ComponentRef): ComponentRef {\n  if (global._IS_FABRIC && component.getNativeScrollRef) {\n    return component.getNativeScrollRef();\n  } else if (!global._IS_FABRIC && component.getScrollableNode) {\n    return component.getScrollableNode();\n  }\n  return component;\n}\n\nconst getTagValueFunction = global._IS_FABRIC\n  ? getShareableShadowNodeFromComponent\n  : getTag;\n\nexport function useAnimatedRef<T extends ComponentRef>(): RefObjectFunction<T> {\n  const tag = useSharedValue<number | ShadowNodeWrapper | null>(-1);\n  const ref = useRef<RefObjectFunction<T>>();\n\n  if (!ref.current) {\n    const fun: RefObjectFunction<T> = <RefObjectFunction<T>>((component) => {\n      // enters when ref is set by attaching to a component\n      if (component) {\n        tag.value = getTagValueFunction(getComponentOrScrollableRef(component));\n        fun.current = component;\n      }\n      return tag.value;\n    });\n\n    fun.current = null;\n\n    const remoteRef = makeShareableCloneRecursive({\n      __init: () => {\n        'worklet';\n        return () => tag.value;\n      },\n    });\n    registerShareableMapping(fun, remoteRef);\n    ref.current = fun;\n  }\n\n  return ref.current;\n}\n"],"mappings":"AAAA,OAAoBA,MAAM,KAAQ,OAAO,CACzC,OAASC,cAAc,wBAGvB,OAASC,MAAM,wBACf,OAASC,oCAAoC,sBAC7C,OACEC,2BAA2B,CAC3BC,wBAAwB,qBAQ1B,QAAS,CAAAC,mCAAmCA,CAC1CC,SAAuB,CACJ,CACnB,MAAO,CAAAJ,oCAAoC,CAACI,SAAS,CAAC,CACxD,CAEA,QAAS,CAAAC,2BAA2BA,CAACD,SAAuB,CAAgB,CAC1E,GAAIE,MAAM,CAACC,UAAU,EAAIH,SAAS,CAACI,kBAAkB,CAAE,CACrD,MAAO,CAAAJ,SAAS,CAACI,kBAAkB,EAAE,CACvC,CAAC,IAAM,IAAI,CAACF,MAAM,CAACC,UAAU,EAAIH,SAAS,CAACK,iBAAiB,CAAE,CAC5D,MAAO,CAAAL,SAAS,CAACK,iBAAiB,EAAE,CACtC,CACA,MAAO,CAAAL,SAAS,CAClB,CAEA,GAAM,CAAAM,mBAAmB,CAAGJ,MAAM,CAACC,UAAU,CACzCJ,mCAAmC,CACnCJ,MAAM,KAAAY,iCAAA,EAAAC,IAAA,wFAAAC,QAAA,oJAEV,MAAO,SAAS,CAAAC,cAAcA,CAAA,CAAiD,CAC7E,GAAM,CAAAC,GAAG,CAAGjB,cAAc,CAAoC,CAAC,CAAC,CAAC,CACjE,GAAM,CAAAkB,GAAG,CAAGnB,MAAM,EAAwB,CAE1C,GAAI,CAACmB,GAAG,CAACC,OAAO,CAAE,CAChB,GAAM,CAAAC,IAAyB,CAA2B,QAApD,CAAAA,GAAyBA,CAA2Bd,SAAS,CAAK,CAEtE,GAAIA,SAAS,CAAE,CACbW,GAAG,CAACI,KAAK,CAAGT,mBAAmB,CAACL,2BAA2B,CAACD,SAAS,CAAC,CAAC,CACvEc,IAAG,CAACD,OAAO,CAAGb,SAAS,CACzB,CACA,MAAO,CAAAW,GAAG,CAACI,KAAK,CAClB,CAAE,CAEFD,IAAG,CAACD,OAAO,CAAG,IAAI,CAElB,GAAM,CAAAG,SAAS,CAAGnB,2BAA2B,CAAC,CAC5CoB,MAAM,gBAAAC,EAAA,UAAAA,GAAA,CAAQ,CAEZ,MAAO,kBAAM,CAAAP,GAAG,CAACI,KAAK,GACxB,EAAAG,EAAA,CAAAC,QAAA,EAAAR,GAAA,CAtDGA,GAAA,EAAAO,EAAA,CAAAE,UAAA,CAAAb,iCAAA,CAAAW,EAAA,CAAAG,aAAA,uBAAAH,EAAA,IAuDL,CAAC,CAAC,CACFpB,wBAAwB,CAACgB,IAAG,CAAEE,SAAS,CAAC,CACxCJ,GAAG,CAACC,OAAO,CAAGC,IAAG,CACnB,CAEA,MAAO,CAAAF,GAAG,CAACC,OAAO,CACpB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}