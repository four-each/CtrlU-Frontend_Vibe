{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import{useEffect,useRef}from'react';import{initialUpdaterRun}from\"../animation\";import{makeMutable,startMapper,stopMapper}from\"../core\";import{shouldBeUseWeb}from\"../PlatformChecker\";var _worklet_6829278738812_init_data={code:\"function anonymous(){const{sharedValue,processor}=this._closure;sharedValue.value=processor();}\",location:\"/Users/positive-yeon/Downloads/cursor-talk-to-figma-mcp-main/node_modules/react-native-reanimated/lib/module/reanimated2/hook/useDerivedValue.js\"};export function useDerivedValue(processor,dependencies){var _processor$_closure;var initRef=useRef(null);var inputs=Object.values((_processor$_closure=processor._closure)!=null?_processor$_closure:{});if(shouldBeUseWeb()){var _dependencies;if(!inputs.length&&(_dependencies=dependencies)!==null&&_dependencies!==void 0&&_dependencies.length){inputs=dependencies;}}if(dependencies===undefined){dependencies=[].concat(_toConsumableArray(inputs),[processor.__workletHash]);}else{dependencies.push(processor.__workletHash);}if(initRef.current===null){initRef.current=makeMutable(initialUpdaterRun(processor));}var sharedValue=initRef.current;useEffect(function(){var fun=function(){var _f=function _f(){sharedValue.value=processor();};_f._closure={sharedValue:sharedValue,processor:processor};_f.__initData=_worklet_6829278738812_init_data;_f.__workletHash=6829278738812;return _f;}();var mapperId=startMapper(fun,inputs,[sharedValue]);return function(){stopMapper(mapperId);};},dependencies);useEffect(function(){return function(){initRef.current=null;};},[]);return sharedValue;}","map":{"version":3,"names":["useEffect","useRef","initialUpdaterRun","makeMutable","startMapper","stopMapper","shouldBeUseWeb","_worklet_6829278738812_init_data","code","location","useDerivedValue","processor","dependencies","_processor$_closure","initRef","inputs","Object","values","_closure","_dependencies","length","undefined","concat","_toConsumableArray","__workletHash","push","current","sharedValue","fun","_f","value","__initData","mapperId"],"sources":["/Users/positive-yeon/Downloads/cursor-talk-to-figma-mcp-main/node_modules/react-native-reanimated/lib/module/reanimated2/hook/useDerivedValue.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { initialUpdaterRun } from '../animation';\nimport { BasicWorkletFunction, SharedValue } from '../commonTypes';\nimport { makeMutable, startMapper, stopMapper } from '../core';\nimport { DependencyList } from './commonTypes';\nimport { shouldBeUseWeb } from '../PlatformChecker';\n\nexport type DerivedValue<T> = Readonly<SharedValue<T>>;\n\nexport function useDerivedValue<T>(\n  processor: BasicWorkletFunction<T>,\n  dependencies: DependencyList\n): DerivedValue<T> {\n  const initRef = useRef<SharedValue<T> | null>(null);\n  let inputs = Object.values(processor._closure ?? {});\n  if (shouldBeUseWeb()) {\n    if (!inputs.length && dependencies?.length) {\n      // let web work without a Babel/SWC plugin\n      inputs = dependencies;\n    }\n  }\n\n  // build dependencies\n  if (dependencies === undefined) {\n    dependencies = [...inputs, processor.__workletHash];\n  } else {\n    dependencies.push(processor.__workletHash);\n  }\n\n  if (initRef.current === null) {\n    initRef.current = makeMutable(initialUpdaterRun(processor));\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const sharedValue: SharedValue<T> = initRef.current!;\n\n  useEffect(() => {\n    const fun = () => {\n      'worklet';\n      sharedValue.value = processor();\n    };\n    const mapperId = startMapper(fun, inputs, [sharedValue]);\n    return () => {\n      stopMapper(mapperId);\n    };\n  }, dependencies);\n\n  useEffect(() => {\n    return () => {\n      initRef.current = null;\n    };\n  }, []);\n\n  return sharedValue;\n}\n"],"mappings":"yEAAA,OAASA,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACzC,OAASC,iBAAiB,oBAE1B,OAASC,WAAW,CAAEC,WAAW,CAAEC,UAAU,eAE7C,OAASC,cAAc,0BAA4B,IAAAC,gCAAA,EAAAC,IAAA,mGAAAC,QAAA,qJAInD,MAAO,SAAS,CAAAC,eAAeA,CAC7BC,SAAkC,CAClCC,YAA4B,CACX,KAAAC,mBAAA,CACjB,GAAM,CAAAC,OAAO,CAAGb,MAAM,CAAwB,IAAI,CAAC,CACnD,GAAI,CAAAc,MAAM,CAAGC,MAAM,CAACC,MAAM,EAAAJ,mBAAA,CAACF,SAAS,CAACO,QAAQ,QAAAL,mBAAA,CAAI,CAAC,CAAC,CAAC,CACpD,GAAIP,cAAc,EAAE,CAAE,KAAAa,aAAA,CACpB,GAAI,CAACJ,MAAM,CAACK,MAAM,GAAAD,aAAA,CAAIP,YAAY,UAAAO,aAAA,WAAZA,aAAA,CAAcC,MAAM,CAAE,CAE1CL,MAAM,CAAGH,YAAY,CACvB,CACF,CAGA,GAAIA,YAAY,GAAKS,SAAS,CAAE,CAC9BT,YAAY,IAAAU,MAAA,CAAAC,kBAAA,CAAOR,MAAM,GAAEJ,SAAS,CAACa,aAAa,EAAC,CACrD,CAAC,IAAM,CACLZ,YAAY,CAACa,IAAI,CAACd,SAAS,CAACa,aAAa,CAAC,CAC5C,CAEA,GAAIV,OAAO,CAACY,OAAO,GAAK,IAAI,CAAE,CAC5BZ,OAAO,CAACY,OAAO,CAAGvB,WAAW,CAACD,iBAAiB,CAACS,SAAS,CAAC,CAAC,CAC7D,CAGA,GAAM,CAAAgB,WAA2B,CAAGb,OAAO,CAACY,OAAQ,CAEpD1B,SAAS,CAAC,UAAM,CACd,GAAM,CAAA4B,GAAG,gBAAAC,EAAA,UAAAA,GAAA,CAAS,CAEhBF,WAAW,CAACG,KAAK,CAAGnB,SAAS,EAAE,CACjC,CAAC,CAAAkB,EAAA,CAAAX,QAAA,EAAAS,WAAA,CAvCLA,WAAS,CAAAhB,SAAA,CAAAA,SAAiB,EAAAkB,EAAA,CAAAE,UAAA,CAAAxB,gCAAA,CAAAsB,EAAA,CAAAL,aAAA,sBAAAK,EAAA,IAuCrB,CACD,GAAM,CAAAG,QAAQ,CAAG5B,WAAW,CAACwB,GAAG,CAAEb,MAAM,CAAE,CAACY,WAAW,CAAC,CAAC,CACxD,MAAO,WAAM,CACXtB,UAAU,CAAC2B,QAAQ,CAAC,CACtB,CAAC,CACH,CAAC,CAAEpB,YAAY,CAAC,CAEhBZ,SAAS,CAAC,UAAM,CACd,MAAO,WAAM,CACXc,OAAO,CAACY,OAAO,CAAG,IAAI,CACxB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAAC,WAAW,CACpB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}