{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _defineProperty2 from\"@babel/runtime/helpers/defineProperty\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty2(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,\"string\");return typeof key===\"symbol\"?key:String(key);}function _toPrimitive(input,hint){if(typeof input!==\"object\"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||\"default\");if(typeof res!==\"object\")return res;throw new TypeError(\"@@toPrimitive must return a primitive value.\");}return(hint===\"string\"?String:Number)(input);}import NativeReanimatedModule from\"./NativeReanimated\";import{registerEventHandler,unregisterEventHandler}from\"./core\";function jsListener(eventName,handler){return function(evt){handler(_objectSpread(_objectSpread({},evt.nativeEvent),{},{eventName:eventName}));};}var WorkletEventHandler=function(){function WorkletEventHandler(worklet){_classCallCheck(this,WorkletEventHandler);var eventNames=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_defineProperty(this,\"worklet\",void 0);_defineProperty(this,\"eventNames\",void 0);_defineProperty(this,\"reattachNeeded\",void 0);_defineProperty(this,\"listeners\",void 0);_defineProperty(this,\"viewTag\",void 0);_defineProperty(this,\"registrations\",void 0);this.worklet=worklet;this.eventNames=eventNames;this.reattachNeeded=false;this.listeners={};this.viewTag=undefined;this.registrations=[];if(!NativeReanimatedModule.native){this.listeners=eventNames.reduce(function(acc,eventName){acc[eventName]=jsListener(eventName,worklet);return acc;},{});}}return _createClass(WorkletEventHandler,[{key:\"updateWorklet\",value:function updateWorklet(newWorklet){this.worklet=newWorklet;this.reattachNeeded=true;}},{key:\"registerForEvents\",value:function registerForEvents(viewTag,fallbackEventName){var _this=this;this.viewTag=viewTag;this.registrations=this.eventNames.map(function(eventName){return registerEventHandler(viewTag+eventName,_this.worklet);});if(this.registrations.length===0&&fallbackEventName){this.registrations.push(registerEventHandler(viewTag+fallbackEventName,this.worklet));}}},{key:\"unregisterFromEvents\",value:function unregisterFromEvents(){this.registrations.forEach(function(id){return unregisterEventHandler(id);});this.registrations=[];}}]);}();export{WorkletEventHandler as default};","map":{"version":3,"names":["NativeReanimatedModule","registerEventHandler","unregisterEventHandler","jsListener","eventName","handler","evt","_objectSpread","nativeEvent","WorkletEventHandler","worklet","_classCallCheck","eventNames","arguments","length","undefined","_defineProperty","reattachNeeded","listeners","viewTag","registrations","native","reduce","acc","_createClass","key","value","updateWorklet","newWorklet","registerForEvents","fallbackEventName","_this","map","push","unregisterFromEvents","forEach","id","default"],"sources":["/Users/positive-yeon/Downloads/cursor-talk-to-figma-mcp-main/node_modules/react-native-reanimated/lib/module/reanimated2/WorkletEventHandler.ts"],"sourcesContent":["import { NativeEvent } from './commonTypes';\nimport NativeReanimatedModule from './NativeReanimated';\nimport { registerEventHandler, unregisterEventHandler } from './core';\n\nfunction jsListener<T extends NativeEvent<T>>(\n  eventName: string,\n  handler: (event: T) => void\n) {\n  return (evt: T) => {\n    handler({ ...evt.nativeEvent, eventName });\n  };\n}\n\nexport default class WorkletEventHandler<T extends NativeEvent<T>> {\n  worklet: (event: T) => void;\n  eventNames: string[];\n  reattachNeeded: boolean;\n  listeners: Record<string, (event: T) => void>;\n  viewTag: number | undefined;\n  registrations: string[];\n  constructor(worklet: (event: T) => void, eventNames: string[] = []) {\n    this.worklet = worklet;\n    this.eventNames = eventNames;\n    this.reattachNeeded = false;\n    this.listeners = {};\n    this.viewTag = undefined;\n    this.registrations = [];\n\n    if (!NativeReanimatedModule.native) {\n      this.listeners = eventNames.reduce(\n        (acc: Record<string, (event: T) => void>, eventName: string) => {\n          acc[eventName] = jsListener(eventName, worklet);\n          return acc;\n        },\n        {}\n      );\n    }\n  }\n\n  updateWorklet(newWorklet: (event: T) => void): void {\n    this.worklet = newWorklet;\n    this.reattachNeeded = true;\n  }\n\n  registerForEvents(viewTag: number, fallbackEventName?: string): void {\n    this.viewTag = viewTag;\n    this.registrations = this.eventNames.map((eventName) =>\n      registerEventHandler(viewTag + eventName, this.worklet)\n    );\n    if (this.registrations.length === 0 && fallbackEventName) {\n      this.registrations.push(\n        registerEventHandler(viewTag + fallbackEventName, this.worklet)\n      );\n    }\n  }\n\n  unregisterFromEvents(): void {\n    this.registrations.forEach((id) => unregisterEventHandler(id));\n    this.registrations = [];\n  }\n}\n"],"mappings":"67CACA,MAAO,CAAAA,sBAAsB,0BAC7B,OAASC,oBAAoB,CAAEC,sBAAsB,cAErD,QAAS,CAAAC,UAAUA,CACjBC,SAAiB,CACjBC,OAA2B,CAC3B,CACA,MAAQ,UAAAC,GAAM,CAAK,CACjBD,OAAO,CAAAE,aAAA,CAAAA,aAAA,IAAMD,GAAG,CAACE,WAAW,MAAEJ,SAAA,CAAAA,SAAA,EAAW,CAAC,CAC5C,CAAC,CACH,IAEqB,CAAAK,mBAAmB,YAOtC,SAAAA,oBAAYC,OAA2B,CAA6B,CAAAC,eAAA,MAAAF,mBAAA,KAA3B,CAAAG,UAAoB,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,EAAE,CAAAG,eAAA,wBAAAA,eAAA,2BAAAA,eAAA,+BAAAA,eAAA,0BAAAA,eAAA,wBAAAA,eAAA,8BAChE,IAAI,CAACN,OAAO,CAAGA,OAAO,CACtB,IAAI,CAACE,UAAU,CAAGA,UAAU,CAC5B,IAAI,CAACK,cAAc,CAAG,KAAK,CAC3B,IAAI,CAACC,SAAS,CAAG,CAAC,CAAC,CACnB,IAAI,CAACC,OAAO,CAAGJ,SAAS,CACxB,IAAI,CAACK,aAAa,CAAG,EAAE,CAEvB,GAAI,CAACpB,sBAAsB,CAACqB,MAAM,CAAE,CAClC,IAAI,CAACH,SAAS,CAAGN,UAAU,CAACU,MAAM,CAChC,SAACC,GAAuC,CAAEnB,SAAiB,CAAK,CAC9DmB,GAAG,CAACnB,SAAS,CAAC,CAAGD,UAAU,CAACC,SAAS,CAAEM,OAAO,CAAC,CAC/C,MAAO,CAAAa,GAAG,CACZ,CAAC,CACD,CAAC,CAAC,CACH,CACH,CACF,QAAAC,YAAA,CAAAf,mBAAA,GAAAgB,GAAA,iBAAAC,KAAA,CAEA,SAAAC,aAAaA,CAACC,UAA8B,CAAQ,CAClD,IAAI,CAAClB,OAAO,CAAGkB,UAAU,CACzB,IAAI,CAACX,cAAc,CAAG,IAAI,CAC5B,IAAAQ,GAAA,qBAAAC,KAAA,CAEA,SAAAG,iBAAiBA,CAACV,OAAe,CAAEW,iBAA0B,CAAQ,KAAAC,KAAA,MACnE,IAAI,CAACZ,OAAO,CAAGA,OAAO,CACtB,IAAI,CAACC,aAAa,CAAG,IAAI,CAACR,UAAU,CAACoB,GAAG,CAAE,SAAA5B,SAAS,QACjD,CAAAH,oBAAoB,CAACkB,OAAO,CAAGf,SAAS,CAAE2B,KAAI,CAACrB,OAAO,CAAC,GACxD,CACD,GAAI,IAAI,CAACU,aAAa,CAACN,MAAM,GAAK,CAAC,EAAIgB,iBAAiB,CAAE,CACxD,IAAI,CAACV,aAAa,CAACa,IAAI,CACrBhC,oBAAoB,CAACkB,OAAO,CAAGW,iBAAiB,CAAE,IAAI,CAACpB,OAAO,CAAC,CAChE,CACH,CACF,IAAAe,GAAA,wBAAAC,KAAA,CAEA,SAAAQ,oBAAoBA,CAAA,CAAS,CAC3B,IAAI,CAACd,aAAa,CAACe,OAAO,CAAE,SAAAC,EAAE,QAAK,CAAAlC,sBAAsB,CAACkC,EAAE,CAAC,GAAC,CAC9D,IAAI,CAAChB,aAAa,CAAG,EAAE,CACzB,gBA9CmBX,mBAAmB,IAAA4B,OAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}